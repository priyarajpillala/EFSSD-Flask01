{% extends "base.html" %}

<!--Page Content -->
{% block content %}

    <h1>Update Film</h1>
    <hr>

    <!-- Update Film Form -->
    <form method="post" enctype="multipart/form-data" class="row g-3">
        <input type="hidden" name="csrf_token" value="{{ csrf_token }}">

        <div class="col-lg-9">
            <!--Film Title textinput -->
            <div class="form-floating">
                <input name="title" type="text" class="form-control" id="title" placeholder="Film Title" value="{{ film['title'] }}">
                <label for="title">Film Title</label>
            </div>
        </div>
        <div class="col-lg-3">
            <!--Release Year number input (with min and max attributes) -->
            <div class="form-floating">
                <input name="release_year" type="number" class="form-control" id="release_year" placeholder="Release Year" min="1900" max="2100" value="{{ film['release_year'] }}">
                <label for="release_year">Release Year</label>
            </div>
        </div>
        <div class="col-12">
            <!--Film Tag Line textinput -->
            <div class="form-floating">
                <input name="tagline" type="text" class="form-control" id="tagline" placeholder="Film Tag Line" value="{{ film['tagline'] }}">
                <label for="tagline">Film Tag Line</label>
            </div>
        </div>
        <div class="col-12">
            <!--Director textinput -->
            <div class="form-floating">
                <input name="director" type="text" class="form-control" id="director" placeholder="Director" value="{{ film['director'] }}">
                <label for="director">Director</label>
            </div>
        </div>
        <div class="col-12 mt-0">
            <!--Film poster file upload-->
            <div class="d-flex flex-sm-row align-items-center justify-content-center mt-3 gap-2">
                <label for="poster">Poster/Image</label>
                <input name="poster" type="text" accept="image/*" class="form-control" id="poster" placeholder="Film Poster" value="{{ film['poster'] }}">
            </div>
        </div>
        <div class="col-lg-5">
            <!--Genre select with predefined options -->
            <div class="form-floating">
                <select name="genre" class="form-select" id="genre" aria-label="Genre select">
                    <option value="" {% if film['genre'] == "" %}selected{% endif %}>Select Genre</option>''
                    <option value="Action" {% if film['genre'] == "Action" %}selected{% endif %}>Action</option>
                    <option value="Adventure" {% if film['genre'] == "Adventure" %}selected{% endif %}>Adventure</option>
                    <option value="Comedy" {% if film['genre'] == "Comedy" %}selected{% endif %}>Comedy</option>
                    <option value="Drama" {% if film['genre'] == "Drama" %}selected{% endif %}>Drama</option>
                    <option value="Horror" {% if film['genre'] == "Horror" %}selected{% endif %}>Horror</option>
                    <option value="Romance" {% if film['genre'] == "Romance" %}selected{% endif %}>Romance</option>
                    <option value="Sci-Fi" {% if film['genre'] == "Sci-Fi" %}selected{% endif %}>Sci-Fi</option>
                    <option value="Documentary" {% if film['genre'] == "Documentary" %}selected{% endif %}>Documentary</option>
                    <option value="Other" {% if film['genre'] == "Other" %}selected{% endif %}>Other</option>
                </select>
                <label for="genre">Genre</label>
            </div>
        </div>
        <div class="col-sm-4 col-lg-2 pb-3 text-center">
            <!--Watched checkbox -->
            <div class="d-flex flex-sm-row align-items-center justify-content-center mt-3 gap-2">
                <div class="form-check">
                    <input name="watched" class="form-check-input" type="checkbox" id="watched" {% if film['watched'] %}checked{% endif %}>
                </div>
                <label class="form-check-label" for="watched">Watched</label>
            </div>
        </div>
        <div class="col-sm-8 col-lg-5 text-center">
            <!--Rating radio buttons -->
            <label for="rating" class="form-label mt-3 me-2">Rating</label>
            <div class="btn-group" role="group" aria-label="Rating">
                <input type="radio" class="btn-check" name="rating" id="rating1" autocomplete="off" value="1" {% if film['rating'] == 1 %}checked{% endif %}>
                <label class="btn btn-outline-primary" for="rating1">1</label>

                <input type="radio" class="btn-check" name="rating" id="rating2" autocomplete="off" value="2" {% if film['rating'] == 2 %}checked{% endif %}>
                <label class="btn btn-outline-primary" for="rating2">2</label>

                <input type="radio" class="btn-check" name="rating" id="rating3" autocomplete="off" value="3" {% if film['rating'] == 3 %}checked{% endif %}>
                <label class="btn btn-outline-primary" for="rating3">3</label>

                <input type="radio" class="btn-check" name="rating" id="rating4" autocomplete="off" value="4" {% if film['rating'] == 4 %}checked{% endif %}>
                <label class="btn btn-outline-primary" for="rating4">4</label>

                <input type="radio" class="btn-check" name="rating" id="rating5" autocomplete="off" value="5" {% if film['rating'] == 5 %}checked{% endif %}>
                <label class="btn btn-outline-primary" for="rating5">5</label>
            </div>
        </div>
        <div class="col-12">
            <!--Review textarea --> 
            <div class="form-floating">
                <textarea name="review" class="form-control" placeholder="Leave a review here" id="review" style="height: 100px">{{ film['review'] }}</textarea>
                <label for="review">Review</label>
            </div>
        </div>
        
        <div class="col-12 text-center">
            <button type="submit" class="btn btn-success w-100">Update</button>
        </div>
            
    </form>

{% endblock %}

<!--Sidebar Content -->
{% block sidebarContent %}

    <div class="card mt-3">
        <div class="card-body text-center ">
            <h5 class="card-title">Delete This Film?</h5>
            <form method="post"  action="{{ url_for('delete', id=film['id’]) }}">
                <input type="hidden" name="csrf_token" value="{{ csrf_token }}">
                <button type="submit" class="btn btn-danger" onclick="return confirm('Are you sure you want to delete this?');">Delete</button>
            </form>
        </div>
    </div>

{% endblock %}
