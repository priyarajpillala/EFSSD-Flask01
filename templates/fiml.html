{% extends "base.html" %}

<!-- Page Title -->
{% set title = film['title'] %}

<a href="{{ url_for('update', id=film['id']) }}" class="btn btn-primary mb-3 float-end">Edit</a>

<!-- Page Content -->
{% block content %}

    <h1>{{ film['title'] }} ({{ film['release_year'] }})</h1>
    <hr>

    <div class="row">
        <div class="col-md-4 mb-3 text-center">
            <img src="{{ film['poster'] }}" alt="Poster for {{ film['title'] }}" class="img-fluid" >
        </div>

        <div class="col-md-8">
            <h4>Tagline</h4>
            <p>{{ film['tagline'] }}</p>

            <h4>Director</h4>
            <p>{{ film['director'] }}</p>

            <h4>Genre</h4>
            <p>{{ film['genre'] }}</p>
        </div>
    </div>

{% endblock %}

<!-- Sidebar Content -->
{% block sidebarContent %}

    <!-- Manage film card -->
    {% if session['user_id'] == film['user'] %}
        <div class="card text-center mt-3">
            <div class="card-body">
                <h5 class="card-title">Manage Film</h5>
                <form method="post" class="btn-group" action="{{ url_for('delete', id=film['id']) }}" onsubmit="return confirm('Are you sure you want to delete this film?');"> 
                    <input type="hidden" name="csrf_token" value="{{ csrf_token }}">
                    <a href="{{ url_for('update', id=film['id']) }}" class="btn btn-primary">Update</a>
                    <button type="submit" class="btn btn-danger">Delete</button>
                </form>
            </div>
        </div>
    {% endif %}

    <!-- Back to all films card -->
    <div class="card text-center mt-3">
        <div class="card-body">
            <a href="{{ url_for('films') }}" class="btn btn-secondary w-100">Back to All Films</a>
        </div>
    </div>

{% endblock %}
